---
plugins:

  followPodLogs:
    shortCut: Shift-L
    description: follow logs
    scopes:
      - po
    command: kubectl
    background: false
    args:
      - logs
      - -f
      - $NAME
      - -n
      - $NAMESPACE
      - --context
      - $CONTEXT

  watch-events:
    shortCut: Shift-E
    confirm: false
    description: Get Events
    scopes:
      - all
    command: sh
    background: false
    args:
      - -c
      - "kubectl events --context $CONTEXT --namespace $NAMESPACE --for $RESOURCE_NAME.${RESOURCE_GROUP:+.RESOURCE_GROUP}/$NAME --watch"

  debugContainer:
    shortCut: Shift-D
    description: Debug container
    dangerous: true
    scopes:
      - containers
    command: bash
    background: false
    confirm: true
    args:
      - -c
      - kubectl debug -it --context $CONTEXT -n=$NAMESPACE $POD --target=$NAME --share-processes --profile netadmin --image ghcr.io/narkatee/debug-container:latest

  debugPod:
    shortCut: Shift-D
    description: Debug pod
    dangerous: true
    scopes:
      - pod
    command: bash
    background: false
    confirm: true
    args:
      - -c
      - kubectl debug -it --context $CONTEXT -n=$NAMESPACE $NAME --profile netadmin --image ghcr.io/narkatee/debug-container:latest
